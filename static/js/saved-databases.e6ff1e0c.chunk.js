(this["webpackJsonp@react-testsql/client"]=this["webpackJsonp@react-testsql/client"]||[]).push([[5],{333:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return s}));var n=a(26),r=function(e,t){var a=new Blob([t],{type:"application/x-sqlite-3"}),r=new FormData;return r.set("database",a),fetch("/api/database/save/".concat(e),{method:"POST",body:r,credentials:"same-origin"}).then(n.a).then((function(e){return e.json()}))},l=function(e){return fetch("/api/database/load/".concat(e),{method:"GET",credentials:"same-origin"}).then(n.a).then((function(e){return e.arrayBuffer()}))},c=function(e){return fetch("/api/database/delete/".concat(e),{method:"GET",credentials:"same-origin"}).then(n.a)},s=function(){return fetch("/api/database/list",{method:"GET",credentials:"same-origin",headers:new Headers({"Content-Type":"application/json"})}).then(n.a).then((function(e){return e.json()}))}},794:function(e,t,a){"use strict";var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),l=(0,n(a(22)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Delete");t.default=l},808:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return _}));var n=a(10),r=a(13),l=a(12),c=a(11),s=a(0),o=a.n(s),i=a(333),u=a(265),d=a(23),h=a.n(d),p=a(34),f=a(272),b=a(266),m=a(267),v=a(268),y=a(274),E=a(264),D=a(263),C=a(216),j=a(287),O=a(288),g=a(794),S=a.n(g),k=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).handleClick=function(){return e.props.clickHandler(e.props.database._id)},e.handleDelete=function(){return e.props.deleteHandler(e.props.database._id)},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props.database,t=e.title,a=e.createdAt,n=new Date(a).toDateString();return o.a.createElement(C.a,{onClick:this.handleClick,button:!0},o.a.createElement(j.a,{primary:t,secondary:n}),this.props.deleteHandler&&o.a.createElement(O.a,{onClick:this.handleDelete},o.a.createElement(D.a,{"aria-label":"Delete"},o.a.createElement(S.a,null))))}}]),a}(o.a.Component),w=a(319),x={display:"flex",justifyContent:"space-between"},H=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={error:null},e.handleLoadDatabase=function(){var t=Object(p.a)(h.a.mark((function t(a){var n,r,l,c,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.loadDatabaseHandler,l=n.closeHandler,t.prev=1,t.next=4,Object(i.c)(a);case 4:return c=t.sent,r(new Uint8Array(c)),t.abrupt("return",l());case 9:return t.prev=9,t.t0=t.catch(1),t.next=13,t.t0.text();case 13:s=t.sent,e.setState({error:s});case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleDeleteDatabase=function(){var t=Object(p.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i.a)(a);case 3:return t.abrupt("return",e.props.refreshSavedDatabaseList());case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,t.t0.text();case 10:n=t.sent,e.setState({error:n});case 12:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClose=function(){return e.props.closeHandler()},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.state.error,a=this.props.list;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{id:"dialog-title"},o.a.createElement("div",{style:x},"Saved Databases",o.a.createElement(E.a,{component:w.b,to:"/database/save",color:"primary",variant:"contained",size:"small"},"Save \xbb"))),t&&o.a.createElement(m.a,null,o.a.createElement(v.a,{color:"error",align:"center"},t)),o.a.createElement(m.a,null,o.a.createElement(v.a,null,"Allows you to save your current database in a more"," ",o.a.createElement("em",null,"permanent")," location, on the server.")),o.a.createElement(f.a,null,a&&a.length?a.map((function(t){return o.a.createElement(k,{key:t._id,database:t,clickHandler:e.handleLoadDatabase,deleteHandler:e.handleDeleteDatabase})})):o.a.createElement(C.a,{disabled:!0},o.a.createElement(j.a,null,"No saved databases yet!"))),o.a.createElement(y.a,null,o.a.createElement(E.a,{onClick:this.handleClose,color:"primary"},"Cancel")))}}]),a}(o.a.Component),L=a(269),A=a(271),T=a(273),z=a(63),B={display:"flex",justifyContent:"space-between"},F=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={title:"",error:null},e.handleSaveDatabase=Object(p.a)(h.a.mark((function t(){var a,n,r,l,c,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.title,n=e.props,r=n.refreshSavedDatabaseList,l=n.currentDatabase,c=l.export(),t.prev=3,t.next=6,Object(i.d)(a,c);case 6:return r(),t.abrupt("return",e.props.history.push("/"));case 10:return t.prev=10,t.t0=t.catch(3),t.next=14,t.t0.text();case 14:s=t.sent,e.setState({error:s});case 16:case"end":return t.stop()}}),t,null,[[3,10]])}))),e.handleChange=function(t){return e.setState({title:t.target.value})},e.handleClose=function(){return e.props.closeHandler()},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.error,n=this.props.currentSavedDatabaseCount;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{id:"dialog-title",style:B,disableTypography:!0},o.a.createElement(z.a,{variant:"h6"},"Save your current database"),o.a.createElement(E.a,{component:w.b,color:"secondary",variant:"contained",size:"small",to:"/"},"\xab Back")),o.a.createElement(m.a,null,o.a.createElement(A.a,{error:Boolean(a),"aria-describedby":"name-error-text",fullWidth:!0},o.a.createElement(L.a,{id:"name",placeholder:"Please choose an identifiable title",value:t,onChange:this.handleChange,margin:"dense",autoFocus:!0,fullWidth:!0,required:!0,inputProps:{maxLength:32}}),a&&o.a.createElement(T.a,{id:"name-error-text"},a))),o.a.createElement(y.a,null,o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:this.handleSaveDatabase,disabled:Boolean(n&&n>4)},"Save (",n,"/5)"),o.a.createElement(E.a,{onClick:this.handleClose,color:"primary"},"Cancel")))}}]),a}(o.a.Component),M=a(437),_=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={list:null},e.componentDidMount=function(){return e.refreshSavedDatabaseList()},e.refreshSavedDatabaseList=function(){return Object(i.b)().then((function(t){return e.setState({list:t})}))},e.handleClose=function(){return e.props.closeHandler()},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.state.list;if(null===t)return null;var a=this.props,n=a.currentDatabase,r=a.loadDatabaseHandler;return o.a.createElement(u.a,{open:!0,onClose:this.handleClose,fullWidth:!0},o.a.createElement(w.a,null,o.a.createElement(M.d,null,o.a.createElement(M.b,{path:"/database/save",component:function(a){var r=a.history;return o.a.createElement(F,{history:r,currentDatabase:n,currentSavedDatabaseCount:t.length,refreshSavedDatabaseList:e.refreshSavedDatabaseList,closeHandler:e.handleClose})}}),o.a.createElement(M.b,{component:function(){return o.a.createElement(H,{list:t,loadDatabaseHandler:r,refreshSavedDatabaseList:e.refreshSavedDatabaseList,closeHandler:e.handleClose})}}))))}}]),a}(o.a.Component)}}]);
//# sourceMappingURL=saved-databases.e6ff1e0c.chunk.js.map